<head>
    <link rel="stylesheet" href="bootstrap-5.1.3/css/bootstrap.css">
</head>
<body>
    <h1 id="test"></h1>


    <script>
          var sock = new WebSocket("ws://localhost:9876/");
          function buttonClicked() {
            sock.send('button clicked');
          }
          window.onload = function() {
            sock.onopen = function () {
                sock.send("hello world");
            };

            sock.onerror = function (error) {
                console.log('WebSocket Error ' + error);
            };

            sock.onmessage = function (e) {
                //console.log('Server: ' + e.data);
                const data = JSON.parse(e.data);
                const channelName = Object.keys(data)[0];
                // game channels
                if (channelName.includes("#mp_")) {

                // normal channels
                } else if (channelName.includes("#")) {

                // personal messages
                } else {
                  const messages = data[channelName];
                  console.log(messages)
                  document.getElementById("test").textContent=messages[0]["content"];
                }

            };

          };
    </script>
</body>